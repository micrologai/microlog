<!--
Microlog. Copyright (c) 2023 laffra, dcharbon. All rights reserved.
-->

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Microlog</title>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
</head>
<style>
    body {
        margin: 0;
        background: black;
    }

    canvas {
        position: absolute;
    }

    .flamegraph-container {
        width: 100%;
        height: 100%;
    }

    .logs {
        color: white;
        font-family: Arial, Helvetica, sans-serif;
        font-size: 14px;
        padding: 6px 6px;
        color: lightgray;
        overflow-y: auto;
        background: #333;
        width: 230px;
        height: 100%;
    }

    .log {
        color: white;
        cursor: pointer;
    }

    .log:hover {
        text-decoration: underline;
        color: orange;
    }

    .hairline {
        display: none;
        position: absolute;
        border: none;
        top: 0;
        width: 1px;
        background: #4A4A;
        z-index: 3;
    }

    .summary {
        position: absolute;
        border: 1px solid gray;
        right: 8px;
        width: 250px;
        background: #222;
        color: lightgray;
        z-index: 3;
        font-size: 14px;
        padding: 8px;
    }

    .dialog {
        display: none;
        position: absolute;
        border: 2px solid gray;
        background-color: white;
        padding: 20px;
        min-width: 350px;
        min-width: 600px;
        max-width: 900px;
        overflow-wrap: break-word;
        overflow-y: auto;
        z-index: 4;
        box-shadow: 0px 0px 10px #999;
    }

    .dialog-close-button {
        position: absolute;
        top: 8px;
        right: 8px;
        color: gray;
        cursor: pointer;
        font-size: 14px;
        font-family: 'Courier New', Courier, monospace;
        width: 24px;
        height: 20px;
        text-align: center;
        border: 1px solid #BBB;
    }

    .dialog-close-button:hover {
        border: 1px solid #333;
    }

    .dialog td {
        text-align: right;
        color: #333;
    }

    .home {
        position: absolute;
        left: 10px;
        top: 10px;
        z-index: 10;
        color: white;
    }

    .home:hover {
        color: orange;
    }

    table td {
        color: lightgray;
        font-size: 12px;
    }

    table .header td {
        width: 120px;
        font-weight: bold;
        color: orange;
        font-size: 14px;
    }

    .hidden {
        visibility: hidden;
        position: absolute;
        top: 0;
        left: 0;
    }

    .loading {
        width: 16px;
        height: 16px;
        margin: 12px;
    }

    .main {
        display: flex;
        flex-direction: row;
        width: 100%;
        overflow: hidden;
    }

    .tabs {
        width: 100%;
        overflow: hidden;
    }

    .dashboard {
        width: 100%;
        height: 100%;
    }

    .button {
        border: 2px solid gray;
        margin: 8px;
        padding: 4px;
        color: gray;
    }

    .button:hover {
        border: 3px solid lightgray;
        margin: 8px;
        padding: 3px;
        color: lightgray;
    }

    .tray {
        background: #444;
    }

    .tray .button {
        width: 25px;
        text-align: center;
        font-size: 20px;
    }

    .tree-node {
        overflow: hidden;
    }

    .tree {
        cursor: pointer;
        padding-left: 0px;
    }

    .tree-delete-icon {
        margin-left: 8px;
        visibility: hidden;
    }

    .tree-row:hover>.tree-delete-icon {
        visibility: visible;
    }

    .tree-label {
        color: #c2c2c2;
        border: 1px solid #333;
    }

    .tree-label[path=""] {
        color: rgb(197, 216, 129);
    }

    .tree-selected {
        border: 1px solid #AAA;
    }

    .tree-leaf .tree-label {
        color: rgb(182, 107, 64);
    }

    .tree-node.open {
        border: 1px solid green;
    }

    .tree-node.closed {
        height: 24px;
    }

    .tree-label:hover {
        background-color: #444;
    }

    .error {
        display: none;
        padding: 30px;
        position: absolute;
        left: 100px;
        top: 100px;
        background-color: red;
        color: white;
    }

    .debug {
        position: absolute;
        right: 8px;
        bottom: 10px;
        max-height: 250px;
        max-width: 225px;
        overflow-x: hidden;
        overflow-y: auto;
        background-color: #555;
        color: #777;
    }

    .design-configure {
        position: absolute;
        background-color: white;
        right: 10px;
        bottom: 10px;
        z-index: 11;
    }

    #tabs-tips {
        padding: 20px;
        color: white;
    }

    #tips {
        margin: 20px 0;
    }

    .tips-button {
        margin: 40px;
        background: lightblue;
        border: 1px solid lightblue;
        font-size: 20px;
        padding: 30px;
    }

    .tips-logo {
        margin: 10px 20px;
        width: 80px;
        height: 80px;
        display: block;
    }

    .tips-button:hover {
        background: rgb(65, 189, 231);
        border: 1px solid navy;
    }

    .design {
        width: 100%;
        height: 100%;
        background-color: #222;
        overflow: hidden;
        color: #EEE;
    }

    .design-canvas {
        width: 100%;
        height: 100%;
    }

    #explanation {
        padding: 12px;
    }

    .tabs {
        background: #444;
        padding: 0;
    }

    .ui-tabs .ui-tabs-panel {
        background: #222;
        padding: 0;
        overflow: auto
    }

    .ui-tabs .ui-tabs-nav {
        background: #444;
    }

    .ui-state-default,
    .ui-widget-content .ui-state-default,
    .ui-widget-header .ui-state-default,
    .ui-button,
    html .ui-button.ui-state-disabled:hover,
    html .ui-button.ui-state-disabled:active {
        background: #555;
        border-color: #999;
    }

    .ui-state-default a,
    .ui-state-default a:link,
    .ui-state-default a:visited,
    a.ui-button,
    a:link.ui-button,
    a:visited.ui-button,
    .ui-button {
        color: #AAA;
    }

    .ui-state-active,
    .ui-widget-content .ui-state-active,
    .ui-widget-header .ui-state-active,
    a.ui-button:active,
    .ui-button:active,
    .ui-button.ui-state-active:hover {
        background: #DDD;
        border-color: #DDD;
    }

    .ui-state-active a,
    .ui-state-active a:link,
    .ui-state-active a:visited {
        color: black;
    }

    .selector {
        color: lightgray;
        background: #333;
    }

    .refresh {
        width: 14px;
        height: 14px;
        color: lightgray;
        background: #333;
        font-size: 28px;
        padding: 5px;
        cursor: pointer;
    }

    .filter {
        width: 150px;
        height: 24px;
        color: lightgray;
        background: #333;
        font-size: 14px;
    }

    #tabs-explain {
        background: #333;
        font-family: 'Courier New', Courier, monospace;
        font-size: 14px;
        color: lightgray;
    }

    #tabs-log {
        background: #333;
        font-family: 'Courier New', Courier, monospace;
        font-size: 14px;
    }

    #tabs-log td {
        color: lightgray;
        vertical-align: top;
        border: 0px solid lightgray;
        border-bottom-width: 1px;
        padding: 4px;
    }

    .log-stack a {
        font-size: 14px;
        color: lightblue;
    }

    .log-when div {
        font-size: 14px;
        color: orange;
        padding: 4px;
    }

    .log-message div {
        margin: 2px;
        font-size: 14px;
        max-width: calc(100% - 200px);
        overflow-wrap: break-word;
    }

    .thread-selector {
        position: absolute;
        left: 10px;
        font-size: 14px;
        width: 18px;
        height: 18px;
    }
</style>

<body>
    <div class="main">
        <div class="selector">
            <span id="refresh" class="refresh">‚ü≥</span>
            <input id="filter" placeholder="search..." class="filter"/>
            <div id="logs" class="logs">
                <img class="loading" src="/images/spinner.gif">
            </div>
        </div>
        <div class="tabs">
            <ul class="tabs-header">
                <li><a href="#tabs-tracing">Timeline</a></li>
                <li><a href="#tabs-design">Design</a></li>
                <li><a href="#tabs-log">Log</a></li>
                <li><a href="#tabs-explain">Explanation</a></li>
                <li><a href="#tabs-tips">Tips</a></li>
            </ul>
            <div id="tabs-tracing">
                <div class="dashboard">
                    <div class="flamegraph-container">
                        <canvas id="timelineCanvas"></canvas>
                        <canvas id="flameCanvas" style="top: 227px;"></canvas>
                    </div>
                    <div id="hairline" class="hairline"></div>
                    <div id="summary" class="summary"></div>
                    <div id="dialog" class="dialog"></div>
                </div>
            </div>
            <div id="tabs-design">
                <div id="design" class="design" zoomed="">
                    <div id="design-canvas" class="design-canvas"></div>
                </div>
                <span id="design-configure" class="design-configure"></span>
            </div>
            <div id="tabs-log">
                <table></table>
            </div>
            <div id="tabs-explain">
                <div id="explanation"></div>
            </div>
            <div id="tabs-tips">
                <div id="tips"></div>
            </div>
        </div>
        <div id="debug" class="debug"></div>
        <pre id="error" class="error"></div>
    </div>

    <div class="hidden">
        <img id="marker-info" width=32 height=32
            src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAhFBMVEVHcExQUz05PkVDSEE9Q0NBRkI8QUQ5P0U9QkQ8QUQ9QkQ+Q0M/REI+Q0M5P0U4PkX/YUT/9QD/8wBfYTg9QkTx5gT06ATu4wZnaDXn3Aj87wH26gKBgCx6eS7a0A1ubzKHhSq6sxg7QETe1AuRjiappB6uqBxKTj9QUz20rhoATypHcEweUJTOAAAALHRSTlMA8I3iEds8fiozvBbPxWJb////////////////////////////////////AJ/4vTYAAAFgSURBVDjLlVPZtoMgDKwratUeQSki4laX/v8PXhEs2NpzbvOEZEwmYeZy+SFcPwW2DVLfPU0HILZIzVhNrBgEH+krcMjICwohxXxsHHA95sMEPQu4R4Y7FIVm3vdYKXP3u4SUzPON/70Wb/d0RGii2xE/vFeNa8JkHg5L3y+DPFcs2nkApOpDPuf5zNVHiYCaz3nu7KrHPD+qnWrnyGkB0fwp5/T1gZuthBuPUN+toaedErFT3+I6XyNU63qDJQZJjQ4F6nt013hyExRqagDy3ADQWpCwGfwGgK39H4BoIR7xa4uU4G8VJElzzDeAHHNdVAZVkyNALeoCGnxeoZKrXh+ry84AWecF5nPTd0BJwC6YaBeMueqqjVwtOSWColmWplDSiIOjaAUPWq5BN9G2sX+QfUQ6nL3mqzoSBR/GaaYBb8YZpsYD7on1ktV6bbtaLzmx3ia+8CbMewvdXyz/B10jNebUUEUhAAAAAElFTkSuQmCC">
        <img id="marker-warn" width=32 height=32
            src="data:image/webp;base64,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">
        <img id="marker-debug" width=32 height=32
            src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABR1BMVEVHcEw1XhZaeB5aeB5LbRpaeB5Ydx1MbBpIahmCoDJWdh02XxZGahk1XhaevCymwzJZdx1aeh671kvQ6VqcuTFwkiI/ZRg1XhZZdx01XhZaeB40XRU1XhY1XhY1XhZaeB40XRaevCzQ6VpZdx41XhZaeB51kyM1XhZaeB5aeB6fvSxaeB5beR41XhaTsSlaeB5aeB5aeB02XxafvSyPriievCxxkSaduyw1XhY1XhY1XhY1XhZaeB5hfyCduECCoiaevCy10EmevCzO51nQ6VqevCxXdh2AniaMqihKbRqFoTQ1XhZaeB6fvSyevCyauStLcRt0kSvS61vQ6VqevCxaeB6evCzR6lqfvSxZdx00XhaWtCpigCClwjLL5VQ7YxeHpCm/2UvF31FWdR2PrihohiKbuS1cfR5+nimuyjuhvUGct0BPcBzzZoeBAAAAVXRSTlMA2vNDCtf5BAwBUPoU9DsLxzkbO9f5JOcwQqQvOY22jpn1sJiBKSN2zqupgd+k9+d2ucXIGCzRz0hO0VLc9/PIucixd/ij2epT6jigoN9Rds5NxLx3WA6UAwAAAehJREFUOMt10mlX2kAUBuCbhDBZCELCKooguLBUCy513+1etUtWRZDi1vb/f+7MZJDAMfdLcu77nJnJ3AAEypg3AOIncQgp/ad9CvDLOloPAcbZD12S1tfKIUvIxtlxJdEuHYYBMA5uzN9dr5sOA9/3XQI8VQkBFdOkwCu9nkcSrutS0I4E2pIgDd8S972/f57Sj932S2tLggY/x7yeurPt245jDTbZRURmtSoIoukLfd62CbAsxznR/dzj8gBJLHK53GeaU4DrKFkoFHA+QyAWPM8f2EFgpTVNYzkWtVZrsz8Orq+KxeLM8EsQQqc0HQHrEjeDc/BPMDwkrro8dklTx3e4+hQ8DHq4DqdGKYrFFt+RZZ3n/m1nkH7EV24uZ2Ixtgd6K4riikN37vQf7l2Sm1GO21lCfh7l95oMWM9Pfu5ioKlE4HxVYVvgGi5AttjNEtHAOT7kmp871zcMJPDAtrNqFSpN8nu8DmCbK4G0QA6ymJoE7zOkX2CDX2j1nAnwr5gZXURy2f0wCT55Oy+jEPbMysfyOOCVksdt+bmyGp2T0Pk4mEbSrJrdpXOaNhv4PjZSQSDio6Oq90amICqQRzw1AiLpQF4NApA36mUf8LUcBMFXXmAzv6h/W9lv1hT2m+e1LzL8B7CLnR+T9d31AAAAAElFTkSuQmCC">
        <img id="marker-error" width=32 height=32
            src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAApVBMVEVHcEy5u7vAxcXo6eni5uaAgIApKSkODQ25vb307e2+wcHy7u6ztLSpqqr27e0AAADm6Ojw7OwAAAAAAAAAAAAAAAAAAAD/AAD/Fhb/kpL/Bwf/AwP/NDT/Cwv/aGj91tb/6en/dnb/fHz/8PD90ND/gID/v7//4uL/Ozv/QUH/ISH/Kyv/trb/n5/07Oz/ZWX/iIj/SUn/WFj929v/UlL/h4f/iYmyi9arAAAAF3RSTlMAjIzq/SkMB4H8lfp7Zv4h6vczWmE7ZyvsseAAAAFLSURBVDjLfZPpdoMgEEZNF83SNGm6jLhiiSyKsRrT93+0YpMmiNjvB8fDvcIwqONc4s4etMw8x4g3X1Wf11QvT96InwK4JkaGYfCRofjXgBuGhQ8MK9eMCX4z1qtvK/811kq4S32YSHGc98JeCQUvII5UYijE+VHN+umfIFLCkogRgoVIcSoiTAgtNaHaiyTxG7nvCko5lQ3Ja4w04cSyKIAQUShxCy2rMQcpw5vgI0ZQABUNuUKCZThPBiuoejIc9UKJu34FYtTQIpGpVysaxFSWkjY4GZ6iOxKCYkAygI5h1nDG+z5oWxSNKhLKKASI2hJi7muCpZPhefR/O7k+ZKG900G+6u/CXT7bjSBfzFxn2uj55YuxGhq3GqHOLYbBR8aI98YB1cklNVqM/z13ub2/Zns+n2E8avGcibib3Wbj/JPd28fr+2DmB1EMSVxgvTPGAAAAAElFTkSuQmCC">
    </div>

    <py-config type="toml">
        [[fetch]]
        from = "http://127.0.0.1:4000/"
        files = [
        "microlog/__init__.py",
        "microlog/api.py",
        "microlog/models.py",
        "microlog/config.py",
        "microlog/log.py",

        "dashboard/__init__.py",
        "dashboard/canvas.py",
        "dashboard/colors.py",
        "dashboard/config.py",
        "dashboard/dialog.py",
        "dashboard/markdown.py",
        "dashboard/profiler.py",
        "dashboard/design.py",
        "dashboard/tips.py",
        "dashboard/treeview.py",
        "dashboard/views/__init__.py",
        "dashboard/views/call.py",
        "dashboard/views/marker.py",
        "dashboard/views/status.py",
        "dashboard/views/timeline.py",
        ]
    </py-config>
    <script>
        $(".tabs").tabs()

        object = () => { }

        function optimizedDrawPolygon() {
            const context = arguments[0]
            context.beginPath()
            context.strokeStyle = arguments[2]
            context.lineWidth = arguments[1]
            var n = 3
            context.moveTo(arguments[n], arguments[n + 1])
            for (; n < arguments.length; n += 2) {
                x = arguments[n]
                y = arguments[n + 1]
                context.lineTo(x, y)
            }
            context.stroke()
        }

        function optimizedFillRects() {
            const context = arguments[0]
            context.beginPath()
            for (var n = 1; n < arguments.length; n += 5) {
                x = arguments[n]
                y = arguments[n + 1]
                w = arguments[n + 2]
                h = arguments[n + 3]
                context.fillStyle = arguments[n + 4]
                context.fillRect(x, y, w, h)
            }
        }

        function optimizedDrawTexts() {
            const context = arguments[0]
            context.beginPath()
            context.strokeStyle = "red"
            for (var n = 1; n < arguments.length; n += 5) {
                x = arguments[n]
                y = arguments[n + 1]
                text = arguments[n + 2]
                color = arguments[n + 3]
                w = arguments[n + 4]
                context.fillStyle = color
                context.fillText(text, x, y, w)
            }
        }

        function optimizedDrawLines() {
            const context = arguments[0]
            context.lineWidth = arguments[1]
            context.strokeStyle = arguments[2]
            for (var n = 3; n < arguments.length; n += 4) {
                context.beginPath()
                context.moveTo(arguments[n], arguments[n + 1])
                context.lineTo(arguments[n + 2], arguments[n + 3])
                context.stroke()
            }
        }
        
        function getUrlParameter(name) {
            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            return urlParams.get(name) || "";
        }
        $(".filter").val(getUrlParameter("filter"))

        // Hide the pyscript splash screen
        setTimeout(() => $("py-splashscreen").text(""), 10);
        setTimeout(() => $("py-splashscreen").text(""), 100);
        setTimeout(() => $("py-splashscreen").text(""), 1000);

        $(".tray").css("height", $(window).height())
        $(".logs").css("height", $(window).height())

        function drawGraph(json) {
            const data = JSON.parse(json);
            const nodes = new vis.DataSet(data.nodes);
            const edges = new vis.DataSet(data.edges);
            $(".tabs").css({
                height: $("body").height(),
            })
            const options = {
                configure: {
                    enabled: false,
                    container: document.getElementById("design-configure"),
                },
                physics: {
                    enabled: true,
                    barnesHut: {
                        gravitationalConstant: -5000,
                        centralGravity: 0.3,
                        springLength: 295,
                        springConstant: 0.04,
                        damping: 0.09,
                        avoidOverlap: 0.35,
                    },
                    forceAtlas2Based: {
                        gravitationalConstant: -50,
                        centralGravity: 0.01,
                        springConstant: 0.08,
                        springLength: 100,
                        damping: 0.4,
                        avoidOverlap: 0
                    },
                    repulsion: {
                        centralGravity: 0.2,
                        springLength: 200,
                        springConstant: 0.05,
                        nodeDistance: 100,
                        damping: 0.09
                    },
                    hierarchicalRepulsion: {
                        centralGravity: 0.0,
                        springLength: 100,
                        springConstant: 0.01,
                        nodeDistance: 120,
                        damping: 0.09
                    },
                    maxVelocity: 50,
                    minVelocity: 0.1,
                    solver: 'barnesHut',
                    stabilization: {
                        enabled: true,
                        iterations: 9,
                        fit: true
                    },
                    timestep: 0.5,
                    adaptiveTimestep: true
                },
                layout: {
                    improvedLayout: false,
                    randomSeed: 191006
                },
                nodes: {
                    shapeProperties: {
                        interpolation: false
                    }
                }
            };
            enablePhysics = (delay) => {
                setTimeout(() => {
                    options.physics.enabled = true;
                    network.setOptions(options)
                }, delay)
            }
            diablePhysics = (delay) => {
                setTimeout(() => {
                    options.physics.enabled = false;
                    network.setOptions(options)
                }, delay)
            }
            network = new vis.Network($("#design-canvas")[0], { nodes, edges, }, options);
            network.on("dragStart", (event) => {
                if (event.nodes.length) {
                    id = event.nodes[0]
                    node = nodes.get(id)
                    node.fixed = false;
                    nodes.update([node])
                }
            })
            network.on("dragStart", (event) => {
                if (event.nodes.length) {
                    enablePhysics();
                }
            })
            network.on("dragEnd", (event) => {
                if (event.nodes.length) {
                    node = nodes.get(event.nodes[0])
                    node.fixed = true;
                    nodes.update([node])
                    diablePhysics(3000);
                }
            })
            network.on("click", (event) => {
                network.startSimulation()
            })
            network.fit();
            diablePhysics(3000);
        }
    </script>
    <py-script src="http://127.0.0.1:4000/dashboard/main.py"></pyscript>
</body>

</html>